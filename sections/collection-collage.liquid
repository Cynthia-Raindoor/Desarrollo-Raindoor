
{{ 'component-card.css' | asset_url | stylesheet_tag }}

<style>
/* ===== ESTILOS BASE ===== */
/* Contenedor principal de la sección */
.collection-collage {
  margin-top: 5rem;
  margin-bottom: 5rem;
}

/* Título principal de la sección */
.collection-collage__heading {
  text-align: center;
  margin-bottom: 3rem;
}

/* Grid que contiene las tarjetas de colecciones */
.collection-collage__grid {
  display: grid;
  gap: 2rem; 
}

/* ===== DISEÑO MÓVIL ===== */
/* En móvil: una columna */
.collection-collage__grid {
  grid-template-columns: 1fr;
}

/* Altura para móvil: relación de aspecto cuadrada (1:1) */
.collection-collage .media {
  padding-bottom: 100%;
}

/* ===== DISEÑO DESKTOP (COLLAGE) ===== */
@media screen and (min-width: 990px) {
  /* Grid de 2 columnas */
  .collection-collage__grid {
    grid-template-columns: 2fr 1fr;
    grid-template-rows: repeat(2, 1fr); 
  }
  .collection-collage__item:nth-child(1) {
    grid-row: 1 / span 2;
  }

  /* Relación de aspecto para la tarjeta grande */
  .collection-collage__item:nth-child(1) .media {
    padding-bottom: 105%;
  }

  /* Relación de aspecto para las tarjetas 2 y 3 (apiladas a la derecha) */
  .collection-collage__item:nth-child(2) .media,
  .collection-collage__item:nth-child(3) .media {
    padding-bottom: 102%;
  }
}

/* ===== ESTILOS DE TARJETA ===== */
/* Contenedor de cada tarjeta */
.collection-collage .card {
  position: relative;
  overflow: hidden; 
}

/* Contenedor de la imagen */
.collection-collage .media {
  position: relative;
  width: 100%;
  overflow: hidden;
}

/* Imagen de la colección: ocupa todo el espacio disponible */
.collection-collage .media img {
  position: absolute;
  inset: 0; 
  width: 100%;
  height: 100%;
  object-fit: cover; 
}

/* ===== OVERLAY ===== */
/* Contenido superpuesto sobre la imagen */
.collection-collage .card__content {
  position: absolute;
  inset: 0; 
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  /* Gradiente*/
  background: linear-gradient(
    to top,
    rgba(0,0,0,0.4),
    rgba(0,0,0,0.1)
  );
}

/* Título de la colección */
.collection-collage .card__heading {
  color: white;
  font-size: 2rem;
  margin-bottom: 1rem;
}

/* Título más grande en tablets y desktop */
@media screen and (min-width: 750px) {
  .collection-collage .card__heading {
    font-size: 3rem;
  }
}

/* Botón "Ver todo" */
.collection-collage .card__button {
  background: transparent;
  border: 1px solid white;
  color: white;
  padding: 0.8rem 2.4rem;
  text-decoration: none;
  font-size: 1.4rem;
  transition: all 0.3s ease;
}

/* Efecto hover del botón: fondo blanco, texto negro */
.collection-collage .card__button:hover {
  background: white;
  color: black;
}

/* ===== CONTADOR DE PRODUCTOS ===== */
.collection-collage .card__caption {
  margin-top: 0.8rem;
  font-size: 1.2rem;
  color: rgba(255,255,255,0.85);
  text-transform: uppercase;
  letter-spacing: 0.08em; 
}
</style>

{%- comment -%}
  ESTRUCTURA HTML DE LA SECCIÓN
{%- endcomment -%}
<div class="collection-collage page-width{% if section.settings.full_width %} page-width--full{% endif %}">
  
  {%- comment -%}
    encabezado de la sección 
  {%- endcomment -%}
  {% if section.settings.heading != blank %}
    <h2 class="collection-collage__heading {{ section.settings.heading_size }}">
      {{ section.settings.heading }}
    </h2>
  {% endif %}

  {%- comment -%}
    Grid que contiene las tarjetas de colecciones
  {%- endcomment -%}
  <div class="collection-collage__grid">
    
    {%- comment -%}
      Itera sobre cada bloque de colección configurado en el editor de temas
    {%- endcomment -%}
    {% for block in section.blocks %}
      {% assign collection = block.settings.collection %}
      
      {%- comment -%}
        Solo muestra la tarjeta si se ha seleccionado una colección
      {%- endcomment -%}
      {% if collection != blank %}
        <div class="collection-collage__item" {{ block.shopify_attributes }}>
          <div class="card">
            
            {%- comment -%}
              Contenedor de la imagen de la colección
            {%- endcomment -%}
            <div class="media">
              {% assign image = collection.featured_image %}
              <img
                src="{{ image | image_url: width: 1600 }}"
                alt="{{ image.alt | escape }}"
                loading="lazy"
                width="{{ image.width }}"
                height="{{ image.height }}"
              >
            </div>

            {%- comment -%}
              Contenido superpuesto: título, contador y botón
            {%- endcomment -%}
            <div class="card__content">
              {%- comment -%}
                Título de la colección
              {%- endcomment -%}
              <h3 class="card__heading">
                {{ collection.title }}
              </h3>

              {%- comment -%}
                Muestra la cantidad de productos si está habilitado
              {%- endcomment -%}
              {% if section.settings.show_product_count %}
                <div class="card__caption">
                  {{ collection.all_products_count }} productos
                </div>
              {% endif %}

              {%- comment -%}
                Muestra el botón "Ver todo" si está habilitado
              {%- endcomment -%}
              {% if section.settings.show_view_all %}
                <a href="{{ collection.url }}" class="card__button">
                  Ver todo
                </a>
              {% endif %}
            </div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>

{%- comment -%}
  SCHEMA: Configuración de la sección en el editor de temas
{%- endcomment -%}
{% schema %}
{
  "name": "Colecciones",
  "tag": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "default": "Visita nuestras colecciones",
      "label": "Encabezado"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        { "value": "h2", "label": "Pequeño" },
        { "value": "h1", "label": "Mediano" },
        { "value": "h0", "label": "Grande" }
      ],
      "default": "h1",
      "label": "Tamaño del encabezado"
    },
    {
      "type": "checkbox",
      "id": "show_product_count",
      "default": true,
      "label": "Mostrar cantidad de productos"
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "default": true,
      "label": "Mostrar botón Ver todo"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": true,
      "label": "Ancho completo"
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Colección",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Colección"
        }
      ]
    }
  ],
  "max_blocks": 3,
  "presets": [
    {
      "name": "Collage de colecciones",
      "blocks": [
        { "type": "collection" },
        { "type": "collection" },
        { "type": "collection" }
      ]
    }
  ]
}
{% endschema %}

